{% extends 'main/base.html' %}

{% block title %}Tournament Details{% endblock %}
{% block content %}


<div class="row">
    <div class="col-9">
        {% if matches %}
    <ol style="color: #FEC53A;">
        {% for match in matches %}
        <p style="color: #FEC53A;font-weight: bold;">{{match.in_round}}</p>
            <li>
                <div class="ccontainer grid">
                    <div class="round">
                      <div class="round">
                        <div class="matchh" style=" width: 86%; display: flex;justify-content: center;align-items: end; height: 155px; background-size: cover;background-repeat: no-repeat; background-image: url({{match.player1.avatar.url}});"><div style="background-color: black; opacity: 75%;">{{ match.player1.user.username }}</div></div>
                        <div class="link"></div>
                        <div class="matchh" style=" width: 86%; display: flex;justify-content: center;align-items: end; height: 155px; background-size: cover;background-repeat: no-repeat; background-image: url({{match.player2.avatar.url}});"><div style="background-color: black; opacity: 75%;">{{ match.player2.user.username }}</div></div>
                      </div>
                   
                    </div>

                {% if not match.winner %}
                    {% if match.tournament.owner.user == request.user%}
                    <form method="post" action="{% url 'tournament:select_winner' match.id %}">
                        {% csrf_token %}
                        <label for="winner">Select Winner:</label>
                        <select name="winner">
                            <option style="background:#FEC53A;" value="{{ match.player1.user.id }}">{{ match.player1.user.username }}</option>
                            <option value="{{ match.player2.user.id }}">{{ match.player2.user.username }}</option>
                        </select>
                        <button  type="submit">Submit Winner</button>
                    </form>
                {%endif%}
                {% else %}
                    <div style=" width: 86%; display: flex;justify-content: center;align-items: end; height: 155px; background-size: 175px;background-repeat: no-repeat; background-image: url({{match.winner.avatar.url}});"><div class="bg-success" style="width: fit-content; display: flex;justify-content: center;align-items: center;">{{ match.winner.user.username }}</div></div>
                {% endif %}
            </li>
            {% endfor %}
            {% if tournament.is_completed %}
                <h2  class="row justify-content-around">completed</h2>
            {% endif %}
        </ol>
        <hr>

        {% else %} 


{% endif %}

    </div>
    <div class="hei col-3">
        <div class="headerss">
        </header>
        <div class="foosterss">
            <h1 style="color: #FEC53A; display: flex;justify-content: center;">Add Comment</h1>
            <form action="{% url 'tournament:show_tournament_details' tournament.id %}" method="post" >
                {% csrf_token %}
                <textarea  class="form-control mt-2" name="content"  placeholder="Your comment"></textarea>
                <input class="btn btn-primary mt-2" type="submit" value="Add Comment" />
            </form>
        </div>
        <nav class="sidebarss">
            <div  class="scrollbox">
                <div class="scrollbox-inner">
                    <p>
                        <div  class="row d-flex" style="flex-direction: column-reverse;">
                            {% for comment in comments %}
                    <div>
                            <div style="border-radius: 20px; background-color:rgb(59, 59, 59);" class="d-flex flex-column gap-1 p-4 mt-3">
                                <div class="d-flex gap-3">
                                    <img src="{{comment.profile.avatar.url}}" width="40px" height="35px" style="border-radius: 50%;">
                                    <h5 style="color: #FEC53A;" >@{{comment.profile.user.username}}</h5>
                                </div>
                                <p class="mt-2">{{comment.content}}</p>
                            </div>
                        </div>
                            {% endfor%}
                    </div>
                    </p>
        
                </div>
            </div>
            
        </nav>

    </div>
    
</div>




{% endblock %}